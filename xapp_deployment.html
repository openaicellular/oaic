

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>xApp Deployment - General Guidelines &mdash; OAIC 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running the Nexran Xapp" href="nexran1.html" />
    <link rel="prev" title="KPIMON xApp Deployment" href="example_xapp_deployment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            OAIC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaic_features.html">OAIC Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Background Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="background_cloud.html">Background on Docker, Kubernetes &amp; Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_oran_architecture.html">O-RAN Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_srsRAN.html">RAN Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation Procedures:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Hardware and Software Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="oran_installation.html">O-RAN Near-Real Time RIC Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsRAN_installation.html">srsRAN with E2 Agent Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup5gnetwork.html">Setup your own 5G Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleUEs.html">Multiples UEs ZMQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="nonrtric.html">O-RAN Non-Real Time RIC Installation Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xApp Deployment:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="example_xapp_deployment.html">KPIMON xApp Deployment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">xApp Deployment - General Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-requisites">Pre-requisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hosting-files-on-a-web-server">Hosting Files on a Web Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-the-nginx-web-server">Configuring the Nginx Web server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hosting-the-config-files">Hosting the config Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-xapp-docker-image">Creating xApp Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xapp-onboarder-deployment">xApp Onboarder Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dms-cli-deployment">DMS-CLI Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nexran1.html">Running the Nexran Xapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssxapp.html">Running the SS Xapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="idxapp.html">Deploying the Intrusion Detection xApp</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="undeploy_ric.html">UnDeploying RIC Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsRAN_additional_features.html">srsRAN Additional Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubectl_commands.html">Kubectl Commands - Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaic_t.html">OAIC-T</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">2024 OAIC Workshop</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="2024_workshop_gcp.html">Day 1 - Google Cloud Platform Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024_workshop_ss.html">Day 1 - Secure Slicing xApp</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_python.html">Day 2 - Developing a custom xApp in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="edgeric-workshop-tutorial.html">Day 2 - EdgeRIC tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAIC-2024-Workshop-oai-flexric-documentation.html">Day 2 - OAI/FlexRIC Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAIC-T-fast-setup.html">Day 3 - OAIC-T</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OAIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">xApp Deployment - General Guidelines</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/xapp_deployment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="xapp-deployment-general-guidelines">
<span id="xappdeployment"></span><h1>xApp Deployment - General Guidelines<a class="headerlink" href="#xapp-deployment-general-guidelines" title="Link to this heading"></a></h1>
<section id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Link to this heading"></a></h2>
<section id="hosting-files-on-a-web-server">
<h3>Hosting Files on a Web Server<a class="headerlink" href="#hosting-files-on-a-web-server" title="Link to this heading"></a></h3>
<p>The xApp descriptor files (config.json) must be hosted on a webserver when we use the <strong>xapp-onboarder</strong> to deploy xApps. To host these files we use Nginx to create a web server.</p>
<section id="configuring-the-nginx-web-server">
<span id="createnginx"></span><h4>Configuring the Nginx Web server<a class="headerlink" href="#configuring-the-nginx-web-server" title="Link to this heading"></a></h4>
<p>First, we need to install Nginx and check if it is in <code class="docutils literal notranslate"><span class="pre">active</span> <span class="pre">(running)</span></code>  state.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo apt-get install nginx
sudo systemctl status nginx
</pre></div>
</div>
<p>Unlink the default Configuration file and check if it is unlinked</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd /etc/nginx/sites-enabled
sudo unlink default
cd ../
</pre></div>
</div>
<p>Now we create some directories which can be accessed by the server and where the config files can be hosted</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd ../../var/www
sudo mkdir xApp_config.local
cd xApp_config.local/
sudo mkdir config_files
</pre></div>
</div>
<p>Create a Custom Configuration File and define file locations</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd ../../../etc/nginx/conf.d
sudo vim xApp_config.local.conf
</pre></div>
</div>
<p>Paste the following content in the <em>conf</em> file.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>server {
    listen 5010 default_server;
    server_name xApp_config.local;
    location /config_files/ {

        root /var/www/xApp_config.local/;
    }

}
</pre></div>
</div>
<p>Save the configuration file and check if there are any errors in the configuration file.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo nginx -t
</pre></div>
</div>
</section>
<section id="hosting-the-config-files">
<span id="hostxappdescriptor"></span><h4>Hosting the config Files<a class="headerlink" href="#hosting-the-config-files" title="Link to this heading"></a></h4>
<p>Copy the xApp config file to this directory. Reload Nginx once this has been done</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo cp &lt;path_to_config_file&gt;/config-file.json /var/www/xApp_config.local/config_files/
sudo systemctl reload nginx
</pre></div>
</div>
<p>Now, you can check if the config file can be accessed from the newly created server. Place all files you want to host in the <code class="docutils literal notranslate"><span class="pre">config_files</span></code> directory</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>curl http://&lt;machine_ip_addr&gt;:5010/config_files/config-file.json
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>Place all files you want to host in the <code class="docutils literal notranslate"><span class="pre">config_files</span></code> directory.</p></li>
<li><p>Make sure all files have a unique name</p></li>
</ul>
</div>
</section>
</section>
</section>
<section id="creating-xapp-docker-image">
<h2>Creating xApp Docker Image<a class="headerlink" href="#creating-xapp-docker-image" title="Link to this heading"></a></h2>
<p>We create the xapp image using the given Dockerfile within the xApp repository.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>docker build . -t xApp-registry.local:5008/&lt;xapp-image-name&gt;:<span class="nt">&lt;version&gt;</span> (Example : xappkpimon:1.0.0).
</pre></div>
</div>
<p>What we are essentially doing here is that we are storing our built image in a local docker repository. This is done to keep things simple. We could use cloud servers too (in that case the image needs to be pushed to the respective server using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">push</span></code>).</p>
</section>
<section id="xapp-onboarder-deployment">
<h2>xApp Onboarder Deployment<a class="headerlink" href="#xapp-onboarder-deployment" title="Link to this heading"></a></h2>
<p>Getting Variables ready</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>export KONG_PROXY=<span class="nv">`sudo kubectl get svc -n ricplt -l app.kubernetes.io/name=kong -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
export APPMGR_HTTP=<span class="nv">`sudo kubectl get svc -n ricplt --field-selector metadata.name=service-ricplt-appmgr-http -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
export ONBOARDER_HTTP=<span class="nv">`sudo kubectl get svc -n ricplt --field-selector metadata.name=service-ricplt-xapp-onboarder-http -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
</pre></div>
</div>
<p>Get helm charts and check if the current xApp is one of them. If there is no helm chart, then we are good to go. Otherwise, we have to use the existing chart or delete it and then proceed forward.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>curl --location --request GET &quot;http://$KONG_PROXY:32080/onboard/api/v1/charts&quot;
</pre></div>
</div>
<p>Now, we need to indicate in the xapp descriptor <code class="docutils literal notranslate"><span class="pre">config-file.json</span></code> to use the image we built in the previous step. To do this, in the <code class="docutils literal notranslate"><span class="pre">image</span></code> section edit the <code class="docutils literal notranslate"><span class="pre">registry</span></code> field to  <code class="docutils literal notranslate"><span class="pre">xApp-registry.local:5008</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;xapp-image-name&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">tag</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;version&gt;</span></code>. An example is given below</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span> &quot;image&quot;: {
        &quot;registry&quot;: &quot;xApp-registry.local:5008&quot;,
        &quot;name&quot;: &quot;&lt;xApp-image-name&gt;&quot;,
        &quot;tag&quot;: &quot;&lt;version&gt;&quot;
}
</pre></div>
</div>
<p>Save the xApp descriptor file and <a class="reference internal" href="#hostxappdescriptor"><span class="std std-ref">host</span></a> it in the Nginx server we previously created. Also, perform the check to see if the config-file is hosted on the server.</p>
<p>Next, we need to create a <code class="docutils literal notranslate"><span class="pre">.url</span></code> file to point the <code class="docutils literal notranslate"><span class="pre">xApp-onboarder</span></code> to the Ngnix server to get the xApp descriptor file and use it to create a helm chart and deploy the xApp.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>vim &lt;xApp-name&gt;-onboard.url
</pre></div>
</div>
<p>Paste the following in the <code class="docutils literal notranslate"><span class="pre">onboard.url</span></code> file. Substitue the <code class="docutils literal notranslate"><span class="pre">&lt;machine_ip_addr&gt;</span></code> with the IP address of your machine. You can find this out through <code class="docutils literal notranslate"><span class="pre">ifconfig</span></code>.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>{&quot;config-file.json_url&quot;:&quot;http://&lt;machine_ip_addr&gt;:5010/&lt;xApp-name-&gt;config-file.json&quot;}
</pre></div>
</div>
<p>Save the file. Now we are ready to deploy the xApp.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>curl -L -X POST &quot;http://$KONG_PROXY:32080/onboard/api/v1/onboard/download&quot; --header &#39;Content-Type: application/json&#39; --data-binary &quot;@&lt;xApp-name&gt;-onboard.url&quot;
curl -L -X GET &quot;http://$KONG_PROXY:32080/onboard/api/v1/charts&quot;
curl -L -X POST &quot;http://$KONG_PROXY:32080/appmgr/ric/v1/xapps&quot; --header &#39;Content-Type: application/json&#39; --data-raw &#39;{&quot;xappName&quot;: &quot;scp-kpimon&quot;}&#39;
</pre></div>
</div>
<p>Verify if the xApp is deployed. There should be a &lt;xApp-name&gt; pod in “ricxapp” namespace</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo kubectl get pods -A
</pre></div>
</div>
<p>We can check the xApp logs using</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>kubectl logs -f -n ricxapp -l app=&lt;xApp-pod-name&gt;
</pre></div>
</div>
</section>
<section id="dms-cli-deployment">
<h2>DMS-CLI Deployment<a class="headerlink" href="#dms-cli-deployment" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="example_xapp_deployment.html" class="btn btn-neutral float-left" title="KPIMON xApp Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nexran1.html" class="btn btn-neutral float-right" title="Running the Nexran Xapp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OAIC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>