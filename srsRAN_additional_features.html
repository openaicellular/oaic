<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>srsRAN Additional Features &mdash; OAIC 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=2709fde1"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Kubectl Commands - Cheat Sheet" href="kubectl_commands.html" />
    <link rel="prev" title="UnDeploying RIC Platform" href="undeploy_ric.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            OAIC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaic_features.html">OAIC Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Background Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="background_cloud.html">Background on Docker, Kubernetes &amp; Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_oran_architecture.html">O-RAN Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_srsRAN.html">RAN Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation Procedures:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Hardware and Software Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="oran_installation.html">O-RAN Near-Real Time RIC Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsRAN_installation.html">srsRAN with E2 Agent Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup5gnetwork.html">Setup your own 5G Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleUEs.html">Multiples UEs ZMQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="nonrtric.html">O-RAN Non-Real Time RIC Installation Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xApp Deployment:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_xapp_deployment.html">KPIMON xApp Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_deployment.html">xApp Deployment - General Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="nexran1.html">Running the Nexran Xapp</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssxapp.html">Running the SS Xapp</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Features</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="undeploy_ric.html">UnDeploying RIC Platform</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">srsRAN Additional Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#multiple-simulated-ues-using-gnu-radio-companion">Multiple Simulated UEs using GNU Radio Companion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-gnu-radio-companion">Installing GNU Radio Companion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation-from-binaries">Installation From Binaries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-an-external-server-internet">Connecting to an external server/internet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-usrps-to-virtualbox-vms">Connecting USRPs to VirtualBox VMs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#connecting-b210-b-205-mini-over-usb-3-0">Connecting B210/B-205 mini over USB 3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-x310-n310-through-ethernet">Connecting X310/N310 through ethernet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#uhd-usrp-performance-enhancement-tips-and-tricks">UHD USRP Performance Enhancement Tips and Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cots-ue-configuration">COTS UE Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kubectl_commands.html">Kubectl Commands - Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaic_t.html">OAIC-T</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">2024 OAIC Workshop</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="2024_workshop_gcp.html">Day 1 - Google Cloud Platform Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="2024_workshop_ss.html">Day 1 - Secure Slicing xApp</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_python.html">Day 2 - Developing a custom xApp in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="edgeric-workshop-tutorial.html">Day 2 - EdgeRIC tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAIC-2024-Workshop-oai-flexric-documentation.html">Day 2 - OAI/FlexRIC Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAIC-T-fast-setup.html">Day 3 - OAIC-T</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OAIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">srsRAN Additional Features</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/srsRAN_additional_features.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="srsran-additional-features">
<h1>srsRAN Additional Features<a class="headerlink" href="#srsran-additional-features" title="Link to this heading"></a></h1>
<section id="multiple-simulated-ues-using-gnu-radio-companion">
<span id="multiple-ue"></span><h2>Multiple Simulated UEs using GNU Radio Companion<a class="headerlink" href="#multiple-simulated-ues-using-gnu-radio-companion" title="Link to this heading"></a></h2>
<p>GNU Radio Companion (GRC) can be used to manipulate, and/or visualize base band I/Q data as it is sent between the UE and eNB. GRC contains ZeroMQ compatible blocks that are connected to the TCP ports used to transmit data between the UE and eNB. The Broker basically acts as a channel for information flow.</p>
<section id="installing-gnu-radio-companion">
<h3>Installing GNU Radio Companion<a class="headerlink" href="#installing-gnu-radio-companion" title="Link to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure you do not have GNU Radio already installed in your system. If so, uninstall previous versions. Also, remove other gnuradio ppas if already configured.</p>
</div>
<p><a class="reference external" href="https://wiki.gnuradio.org/index.php/InstallingGR">GNU Radio Installation</a></p>
<section id="installation-from-binaries">
<h4>Installation From Binaries<a class="headerlink" href="#installation-from-binaries" title="Link to this heading"></a></h4>
<p>To access the current released version (3.10), add the gnuradio/gnuradio-releases ppa, update the sources and install gnuradio</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:gnuradio/gnuradio-releases
sudo apt-get update
sudo apt install gnuradio
</pre></div>
</div>
<p>GNU Radio 3.10 will need <em>python packaging</em>.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-pip
pip install packaging
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>(<strong>Optional</strong>) If you need to increase performance, you can run <code class="docutils literal notranslate"><span class="pre">volk_profile</span></code>. If you encounter <em>cannot import gnuradio</em> error, follow the steps given <a class="reference external" href="https://wiki.gnuradio.org/index.php?title=ModuleNotFoundError#B._Finding_the_Python_library">here</a>.</p>
</div>
</section>
</section>
</section>
<section id="connecting-to-an-external-server-internet">
<h2>Connecting to an external server/internet<a class="headerlink" href="#connecting-to-an-external-server-internet" title="Link to this heading"></a></h2>
<p>To allow UE to connect to the internet via the EPC, the pre-configured masquerading script <code class="docutils literal notranslate"><span class="pre">srsepc_if_masq.sh</span></code> must be run . The script can be found in <a class="reference external" href="https://github.com/openaicellular/srsRAN-e2/tree/test_branch/srsepc">srsRAN-e2/srsepc</a>. The masquerading script enables IP forwarding and sets up Network Address Translation to pass traffic between the srsRAN network (through EPC) and the external network.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The script must be run each time the machine is re-booted, and can be done before or while the network is running. Here we setup the network first.
Run the <code class="docutils literal notranslate"><span class="pre">srsepc</span></code> and <code class="docutils literal notranslate"><span class="pre">srsenb</span></code>. Please check the tutorial <cite>:ref:here &lt;&gt;</cite> for the steps.</p>
</div>
<p>Running the above script requires the network interface which is connected to the external network/internet to be passed as an input argument. To identify this run</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>route
</pre></div>
</div>
<p>You will see an output similar to the following:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Kernel IP routing table
Destination     Gateway       Genmask        Flags      Metric  Ref    Use      Iface
default         192.168.1.1   0.0.0.0        UG         600     0        0      wlp2s0
10.0.2.0        0.0.0.0       255.255.255.0  U          100     0        0      enp0s3
link-local      0.0.0.0       255.255.0.0    U          1000    0        0      wlp2s0
192.168.1.0     0.0.0.0       255.255.255.0  U          600     0        0      wlp2s0
</pre></div>
</div>
<p>The interface (<em>Iface</em>) associated with the <strong>default</strong> destination is one which must be passed into the masq. script. In the above output that is the <code class="docutils literal notranslate"><span class="pre">wlp2s0</span></code> (indicates wifi) interface.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">enp0s3</span></code> usually indicates ethernet interface.</p>
<p>Now run the Masquerading script. Plug in the interface you obtained using the command above.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo ./srsepc_if_masq.sh &lt;interface&gt;
</pre></div>
</div>
<p>If the script executed successfully you will get</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Masquerading Interface &lt;interface&gt;
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure the UE machine is not connected to internet.</p>
</div>
<p>Run the <code class="docutils literal notranslate"><span class="pre">srsue</span></code>. On successful connection (<strong>RRC connected</strong>) A virtual network interface named <strong>tun_srsue</strong> will be created on the UE machine and it will be assigned an IP address by the EPC with format <code class="docutils literal notranslate"><span class="pre">172.16.0.x</span></code>.
Here we assume that the UE is assigned an IP address <code class="docutils literal notranslate"><span class="pre">172.16.0.2</span></code></p>
<p>Check if you can ping the EPC (SGi IP address: <code class="docutils literal notranslate"><span class="pre">172.16.0.1</span></code>)</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>ping 172.16.0.1
</pre></div>
</div>
<p>Once this is successful, we will configure the EPC to act as a gateway to the external network/internet for the UE. On the UE machine run</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo route add default gw 172.16.0.1 tun_srsue
</pre></div>
</div>
<p>That’s it. Test by pinging Google’s DNS server</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>ping 8.8.8.8
</pre></div>
</div>
</section>
<section id="connecting-usrps-to-virtualbox-vms">
<h2>Connecting USRPs to VirtualBox VMs<a class="headerlink" href="#connecting-usrps-to-virtualbox-vms" title="Link to this heading"></a></h2>
<section id="connecting-b210-b-205-mini-over-usb-3-0">
<h3>Connecting B210/B-205 mini over USB 3.0<a class="headerlink" href="#connecting-b210-b-205-mini-over-usb-3-0" title="Link to this heading"></a></h3>
</section>
<section id="connecting-x310-n310-through-ethernet">
<h3>Connecting X310/N310 through ethernet<a class="headerlink" href="#connecting-x310-n310-through-ethernet" title="Link to this heading"></a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your machine, does not support 10G Ethernet then you can use adapters (USB-C/USB3.0 to 10G ethernet adapters)</p>
</div>
<div class="admonition-todo admonition">
<p class="admonition-title">TODO</p>
<p>Add images here.
USRP IP address will change depending on the FPGA Image that it loaded. Indicate this in the instructions below.</p>
</div>
<p>Make sure the USRP is connected to the machine’s secondary NIC (Ethernet in this case) and the VM is not running. In VirtualBox’s Settings window, click the <code class="docutils literal notranslate"><span class="pre">Network</span></code> tab, and then <code class="docutils literal notranslate"><span class="pre">Adpater</span> <span class="pre">2</span></code>. Leave <code class="docutils literal notranslate"><span class="pre">Adapter</span> <span class="pre">1</span></code> alone so that you still have Internet access inside the VM. In <code class="docutils literal notranslate"><span class="pre">Attached</span> <span class="pre">to</span></code>, choose <code class="docutils literal notranslate"><span class="pre">Bridged</span> <span class="pre">Adapter</span></code> so that the VM has direct access to the physical network adapter. Then in <code class="docutils literal notranslate"><span class="pre">Name</span></code>, choose the <strong>secondary NIC (ethernet)</strong> that is physically connected to the USRP.</p>
<p>Save the configuration and boot into the Virtual Machine.</p>
<p>Make sure the network adapter is visible.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>ifconfig -a
sudo ifconfig enp0s8 192.168.10.1
sudo ip route add 192.168.10.0/24 dev enp0s8
ip route
sudo ifconfig enp0s8 up
ping 192.168.10.2
uhd_find_devices
</pre></div>
</div>
<p>Now you should be able to ping the USRP from the VM</p>
</section>
</section>
<section id="uhd-usrp-performance-enhancement-tips-and-tricks">
<span id="performance-tips"></span><h2>UHD USRP Performance Enhancement Tips and Tricks<a class="headerlink" href="#uhd-usrp-performance-enhancement-tips-and-tricks" title="Link to this heading"></a></h2>
</section>
<section id="cots-ue-configuration">
<h2>COTS UE Configuration<a class="headerlink" href="#cots-ue-configuration" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="undeploy_ric.html" class="btn btn-neutral float-left" title="UnDeploying RIC Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="kubectl_commands.html" class="btn btn-neutral float-right" title="Kubectl Commands - Cheat Sheet" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OAIC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>